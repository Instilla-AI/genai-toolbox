sources:
  my-postgres-db:
    kind: postgres
    host: ${DATABASE_HOST}
    port: ${DATABASE_PORT}
    database: ${DATABASE_NAME}
    user: ${DATABASE_USER}
    password: ${DATABASE_PASSWORD}

tools:
  search-data:
    kind: postgres-sql
    source: my-postgres-db
    description: Cerca dati nel database usando linguaggio naturale
    parameters:
      - name: query
        type: string
        description: La query di ricerca
    statement: SELECT * FROM your_table WHERE description ILIKE '%' || $1 || '%';

  get-analytics:
    kind: postgres-sql
    source: my-postgres-db
    description: Ottieni analytics dai dati
    parameters:
      - name: period
        type: string
        description: Periodo per l'analisi (day, week, month)
    statement: |
      SELECT 
        DATE_TRUNC($1, created_at) as period,
        COUNT(*) as total_records,
        AVG(value) as avg_value
      FROM your_analytics_table 
      GROUP BY DATE_TRUNC($1, created_at)
      ORDER BY period DESC;

toolsets:
  main_toolset:
    - search-data
    - get-analytics
